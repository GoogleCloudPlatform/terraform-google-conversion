// ----------------------------------------------------------------------------
//
//     ***     AUTO GENERATED CODE    ***    Type: MMv1     ***
//
// ----------------------------------------------------------------------------
//
//     This code is generated by Magic Modules using the following:
//
//     Configuration: https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/products/databasemigrationservice/MigrationJob.yaml
//     Template:      https://github.com/GoogleCloudPlatform/magic-modules/tree/main/mmv1/templates/tgc_next/services/resource.go.tmpl
//
//     DO NOT EDIT this file directly. Any changes made to this file will be
//     overwritten during the next generation cycle.
//
// ----------------------------------------------------------------------------

package databasemigrationservice

import (
	"bytes"
	"context"
	"encoding/json"
	"fmt"
	"log"
	"reflect"
	"regexp"
	"sort"
	"strconv"
	"strings"

	"github.com/hashicorp/terraform-plugin-sdk/v2/helper/schema"
	"github.com/hashicorp/terraform-plugin-sdk/v2/helper/structure"
	"github.com/hashicorp/terraform-plugin-sdk/v2/helper/validation"

	"github.com/GoogleCloudPlatform/terraform-google-conversion/v7/pkg/tgcresource"
	"github.com/GoogleCloudPlatform/terraform-google-conversion/v7/pkg/tpgresource"
	transport_tpg "github.com/GoogleCloudPlatform/terraform-google-conversion/v7/pkg/transport"
	"github.com/GoogleCloudPlatform/terraform-google-conversion/v7/pkg/verify"
)

var (
	_ = bytes.Clone
	_ = context.WithCancel
	_ = fmt.Sprintf
	_ = json.Unmarshal
	_ = log.Print
	_ = reflect.ValueOf
	_ = regexp.Match
	_ = sort.IntSlice{}
	_ = strconv.Atoi
	_ = strings.Trim
	_ = schema.Noop
	_ = structure.NormalizeJsonString
	_ = validation.All
	_ = tgcresource.RemoveTerraformAttributionLabel
	_ = tpgresource.GetRegion
	_ = transport_tpg.Config{}
	_ = verify.ProjectRegex
)

const DatabaseMigrationServiceMigrationJobAssetType string = "datamigration.googleapis.com/MigrationJob"

const DatabaseMigrationServiceMigrationJobSchemaName string = "google_database_migration_service_migration_job"

func ResourceDatabaseMigrationServiceMigrationJob() *schema.Resource {
	return &schema.Resource{
		Schema: map[string]*schema.Schema{
			"destination": {
				Type:        schema.TypeString,
				Required:    true,
				ForceNew:    true,
				Description: `The name of the destination connection profile resource in the form of projects/{project}/locations/{location}/connectionProfiles/{destinationConnectionProfile}.`,
			},
			"migration_job_id": {
				Type:        schema.TypeString,
				Required:    true,
				ForceNew:    true,
				Description: `The ID of the migration job.`,
			},
			"source": {
				Type:        schema.TypeString,
				Required:    true,
				ForceNew:    true,
				Description: `The name of the source connection profile resource in the form of projects/{project}/locations/{location}/connectionProfiles/{sourceConnectionProfile}.`,
			},
			"type": {
				Type:         schema.TypeString,
				Required:     true,
				ForceNew:     true,
				ValidateFunc: verify.ValidateEnum([]string{"ONE_TIME", "CONTINUOUS"}),
				Description:  `The type of the migration job. Possible values: ["ONE_TIME", "CONTINUOUS"]`,
			},
			"display_name": {
				Type:        schema.TypeString,
				Optional:    true,
				Description: `The migration job display name.`,
			},
			"dump_flags": {
				Type:        schema.TypeList,
				Optional:    true,
				Description: `The initial dump flags.`,
				MaxItems:    1,
				Elem: &schema.Resource{
					Schema: map[string]*schema.Schema{
						"dump_flags": {
							Type:        schema.TypeList,
							Optional:    true,
							Description: `A list of dump flags`,
							Elem: &schema.Resource{
								Schema: map[string]*schema.Schema{
									"name": {
										Type:        schema.TypeString,
										Optional:    true,
										Description: `The name of the flag`,
									},
									"value": {
										Type:        schema.TypeString,
										Optional:    true,
										Description: `The vale of the flag`,
									},
								},
							},
						},
					},
				},
			},
			"dump_path": {
				Type:     schema.TypeString,
				Optional: true,
				Description: `The path to the dump file in Google Cloud Storage,
in the format: (gs://[BUCKET_NAME]/[OBJECT_NAME]).
This field and the "dump_flags" field are mutually exclusive.`,
			},
			"dump_type": {
				Type:         schema.TypeString,
				Optional:     true,
				ValidateFunc: verify.ValidateEnum([]string{"LOGICAL", "PHYSICAL", ""}),
				Description: `The type of the data dump. Supported for MySQL to CloudSQL for MySQL
migrations only. Possible values: ["LOGICAL", "PHYSICAL"]`,
			},
			"labels": {
				Type:     schema.TypeMap,
				Optional: true,
				Description: `The resource labels for migration job to use to annotate any related underlying resources such as Compute Engine VMs.


**Note**: This field is non-authoritative, and will only manage the labels present in your configuration.
Please refer to the field 'effective_labels' for all of the labels present on the resource.`,
				Elem: &schema.Schema{Type: schema.TypeString},
			},
			"location": {
				Type:        schema.TypeString,
				Optional:    true,
				ForceNew:    true,
				Description: `The location where the migration job should reside.`,
			},
			"performance_config": {
				Type:        schema.TypeList,
				Optional:    true,
				Description: `Data dump parallelism settings used by the migration.`,
				MaxItems:    1,
				Elem: &schema.Resource{
					Schema: map[string]*schema.Schema{
						"dump_parallel_level": {
							Type:         schema.TypeString,
							Optional:     true,
							ValidateFunc: verify.ValidateEnum([]string{"MIN", "OPTIMAL", "MAX", ""}),
							Description:  `Initial dump parallelism level. Possible values: ["MIN", "OPTIMAL", "MAX"]`,
						},
					},
				},
			},
			"reverse_ssh_connectivity": {
				Type:        schema.TypeList,
				Optional:    true,
				Description: `The details of the VPC network that the source database is located in.`,
				MaxItems:    1,
				Elem: &schema.Resource{
					Schema: map[string]*schema.Schema{
						"vm": {
							Type:     schema.TypeString,
							Optional: true,
							Description: `The name of the virtual machine (Compute Engine) used as the bastion server
for the SSH tunnel.`,
						},
						"vm_ip": {
							Type:     schema.TypeString,
							Optional: true,
							Description: `The IP of the virtual machine (Compute Engine) used as the bastion server
for the SSH tunnel.`,
						},
						"vm_port": {
							Type:     schema.TypeInt,
							Optional: true,
							Description: `The forwarding port of the virtual machine (Compute Engine) used as the
bastion server for the SSH tunnel.`,
						},
						"vpc": {
							Type:        schema.TypeString,
							Optional:    true,
							Description: `The name of the VPC to peer with the Cloud SQL private network.`,
						},
					},
				},
				ExactlyOneOf: []string{"static_ip_connectivity", "vpc_peering_connectivity"},
			},
			"static_ip_connectivity": {
				Type:     schema.TypeList,
				Optional: true,
				Description: `If set to an empty object ('{}'), the source database will allow incoming
connections from the public IP of the destination database.
You can retrieve the public IP of the Cloud SQL instance from the
Cloud SQL console or using Cloud SQL APIs.`,
				MaxItems: 1,
				Elem: &schema.Resource{
					Schema: map[string]*schema.Schema{},
				},
				ExactlyOneOf: []string{"reverse_ssh_connectivity", "vpc_peering_connectivity"},
			},
			"vpc_peering_connectivity": {
				Type:        schema.TypeList,
				Optional:    true,
				Description: `The details of the VPC network that the source database is located in.`,
				MaxItems:    1,
				Elem: &schema.Resource{
					Schema: map[string]*schema.Schema{
						"vpc": {
							Type:        schema.TypeString,
							Optional:    true,
							Description: `The name of the VPC network to peer with the Cloud SQL private network.`,
						},
					},
				},
				ExactlyOneOf: []string{"reverse_ssh_connectivity", "static_ip_connectivity"},
			},
			"create_time": {
				Type:        schema.TypeString,
				Computed:    true,
				Description: `Output only. The timestamp when the resource was created. A timestamp in RFC3339 UTC 'Zulu' format, accurate to nanoseconds. Example: '2014-10-02T15:01:23.045123456Z'.`,
			},
			"effective_labels": {
				Type:        schema.TypeMap,
				Computed:    true,
				Description: `All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.`,
				Elem:        &schema.Schema{Type: schema.TypeString},
			},
			"error": {
				Type:        schema.TypeList,
				Computed:    true,
				Description: `Output only. The error details in case of state FAILED.`,
				Elem: &schema.Resource{
					Schema: map[string]*schema.Schema{},
				},
			},
			"name": {
				Type:        schema.TypeString,
				Computed:    true,
				Description: `The name of this migration job resource in the form of projects/{project}/locations/{location}/migrationJobs/{migrationJob}.`,
			},
			"phase": {
				Type:        schema.TypeString,
				Computed:    true,
				Description: `The current migration job phase.`,
			},
			"state": {
				Type:        schema.TypeString,
				Computed:    true,
				Description: `The current migration job state.`,
			},
			"terraform_labels": {
				Type:     schema.TypeMap,
				Computed: true,
				Description: `The combination of labels configured directly on the resource
 and default labels configured on the provider.`,
				Elem: &schema.Schema{Type: schema.TypeString},
			},
			"project": {
				Type:     schema.TypeString,
				Optional: true,
				Computed: true,
				ForceNew: true,
			},
		},
		UseJSONNumber: true,
	}
}
